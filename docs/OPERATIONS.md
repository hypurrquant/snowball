# Snowball â€” ì „ì²´ ìš´ì˜ í”Œë¡œìš° & ê¸°ëŠ¥ ìƒì„¸ & ìœ ì € í”Œë¡œìš°

> Version: v0.2.0 | Status: Active
> Last updated: 2026-02-25
> [INDEX](INDEX.md)

---

## ëª©ì°¨

1. [ì‹œìŠ¤í…œ ì „ì²´ ì•„í‚¤í…ì²˜](#1-ì‹œìŠ¤í…œ-ì „ì²´-ì•„í‚¤í…ì²˜)
2. [ìš´ì˜ êµ¬ì„± ìš”ì†Œ](#2-ìš´ì˜-êµ¬ì„±-ìš”ì†Œ)
3. [ê¸°ëŠ¥ë³„ ìƒì„¸ ì„¤ëª…](#3-ê¸°ëŠ¥ë³„-ìƒì„¸-ì„¤ëª…)
4. [ìœ ì € í”Œë¡œìš°](#4-ìœ ì €-í”Œë¡œìš°)
5. [ìš´ì˜ í”Œë¡œìš° (Operator)](#5-ìš´ì˜-í”Œë¡œìš°-operator)
6. [ë°°í¬ëœ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œ](#6-ë°°í¬ëœ-ì»¨íŠ¸ë™íŠ¸-ì£¼ì†Œ)
7. [API ì—”ë“œí¬ì¸íŠ¸](#7-api-ì—”ë“œí¬ì¸íŠ¸)
8. [Docker ìš´ì˜](#8-docker-ìš´ì˜)
9. [ëª¨ë‹ˆí„°ë§ & ì¥ì•  ëŒ€ì‘](#9-ëª¨ë‹ˆí„°ë§--ì¥ì• -ëŒ€ì‘)

---

## 1. ì‹œìŠ¤í…œ ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì‚¬ìš©ì (ë¸Œë¼ìš°ì €)                          â”‚
â”‚                                                                 â”‚
â”‚  packages/frontend (Next.js 15)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Swap â”‚ Pool â”‚ Lend â”‚Borrowâ”‚ Earn â”‚Optionâ”‚ More â”‚             â”‚
â”‚  â””â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”¬â”€â”€â”€â”˜             â”‚
â”‚     â”‚      â”‚      â”‚      â”‚      â”‚      â”‚      â”‚                 â”‚
â”‚  Privy Auth + wagmi/viem                                        â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚      â”‚      â”‚      â”‚      â”‚      â”‚      â”‚
      â”‚ ì˜¨ì²´ì¸â”‚ TX   â”‚      â”‚      â”‚      â”‚ REST â”‚ WebSocket
      â”‚      â”‚      â”‚      â”‚      â”‚      â”‚ API  â”‚
      â–¼      â–¼      â–¼      â–¼      â–¼      â”‚      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚    Creditcoin Testnet (102031)      â”‚   â”‚      â”‚
â”‚                                     â”‚   â”‚      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚      â”‚
â”‚  â”‚ Algebra  â”‚ â”‚ Liquity â”‚           â”‚   â”‚      â”‚
â”‚  â”‚ V4 DEX   â”‚ â”‚ V2 Fork â”‚           â”‚   â”‚      â”‚
â”‚  â”‚ (Swap,   â”‚ â”‚ (Borrow,â”‚           â”‚   â”‚      â”‚
â”‚  â”‚  Pool)   â”‚ â”‚  Earn)  â”‚           â”‚   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚      â”‚
â”‚  â”‚ Morpho   â”‚ â”‚ Options â”‚           â”‚   â”‚      â”‚
â”‚  â”‚ Blue     â”‚ â”‚ Protocolâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”˜      â”‚
â”‚  â”‚ (Lend)   â”‚ â”‚ (UUPS)  â”‚           â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚          â”‚
â”‚  â”‚ BTC Mock â”‚ â”‚ ERC-8004â”‚           â”‚          â”‚
â”‚  â”‚ Oracle   â”‚ â”‚ Agent   â”‚           â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚          â”‚
â”‚       â”‚                             â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
        â”‚                                        â”‚
        â”‚ updatePrice() (10ì´ˆ ì£¼ê¸°)                â”‚
        â”‚                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Backend (FastAPI, Python)              â”‚
â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Oracle Serviceâ”‚  â”‚ Price API/WS   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚ (Binance WS) â”‚  â”‚ /ws/price      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ FIFO Matching â”‚  â”‚ Settlement Botâ”‚
â”‚  â”‚ Engine       â”‚  â”‚ (5ì´ˆ í´ë§)     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                â”‚
â”‚  Port 8000 | Docker: snowball-backend          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í•µì‹¬ ë°ì´í„° íë¦„

```
â‘  Binance WS â†’ Backend â†’ BTCMockOracle (ì˜¨ì²´ì¸, 10ì´ˆ)
â‘¡ ìœ ì € ì£¼ë¬¸(EIP-712) â†’ Backend API â†’ FIFO ë§¤ì¹­ â†’ OptionsRelayer(ì˜¨ì²´ì¸)
â‘¢ ë¼ìš´ë“œ ë§Œê¸° â†’ Settlement Bot â†’ SnowballOptions.settleOrders()(ì˜¨ì²´ì¸)
â‘£ ìœ ì € TX (Swap/Borrow/Lend) â†’ í”„ë¡ íŠ¸ì—”ë“œ wagmi â†’ ì§ì ‘ ì˜¨ì²´ì¸
```

---

## 2. ìš´ì˜ êµ¬ì„± ìš”ì†Œ

### 2.1 í”„ë¡ íŠ¸ì—”ë“œ (`packages/frontend/`)

| í•­ëª© | ê°’ |
|------|-----|
| í”„ë ˆì„ì›Œí¬ | Next.js 15.5 + React 19 |
| ì¸ì¦ | Privy (ì´ë©”ì¼/êµ¬ê¸€/ì§€ê°‘ + ì„ë² ë””ë“œ ì§€ê°‘) |
| ì²´ì¸ ì—°ê²° | wagmi 2.14 + viem 2.21 |
| í¬íŠ¸ | 3000 |
| Docker | `snowball-frontend` ì»¨í…Œì´ë„ˆ |

### 2.2 ë°±ì—”ë“œ (`backend/`)

| í•­ëª© | ê°’ |
|------|-----|
| í”„ë ˆì„ì›Œí¬ | Python FastAPI + asyncio |
| ê°€ê²© ì†ŒìŠ¤ | Binance WebSocket (1ì°¨) + CoinGecko REST (fallback) |
| ì˜¤ë¼í´ í‘¸ì‹œ | 10ì´ˆ ê°„ê²© |
| ì •ì‚° í´ë§ | 5ì´ˆ ê°„ê²© |
| í¬íŠ¸ | 8000 |
| Docker | `snowball-backend` ì»¨í…Œì´ë„ˆ |

### 2.3 ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸

| í”„ë¡œí† ì½œ | íŒ¨í‚¤ì§€ | ì»¨íŠ¸ë™íŠ¸ ìˆ˜ | íŒ¨í„´ |
|----------|--------|-------------|------|
| Algebra V4 DEX | `packages/algebra` | ~10 | ì¼ë°˜ |
| Liquity V2 | `packages/liquity` | ~12 (Ã—2 ë¸Œëœì¹˜) | ì¼ë°˜ |
| Morpho Blue | `packages/morpho` | ~5 | ì¼ë°˜ |
| BTC Oracle | `packages/oracle` | 1 | AccessControl |
| Options Protocol | `packages/options` | 4 | UUPS Proxy |
| ERC-8004 Agent | `packages/erc-8004` | 3 | ì¼ë°˜ |

### 2.4 í•­ì‹œ êµ¬ë™ í”„ë¡œì„¸ìŠ¤

| í”„ë¡œì„¸ìŠ¤ | ìœ„ì¹˜ | ì—­í•  | ì£¼ê¸° |
|----------|------|------|------|
| Oracle Push Loop | `backend/app/oracle/service.py` | BTC ê°€ê²© â†’ ì˜¨ì²´ì¸ | 10ì´ˆ |
| Binance WS Feed | `backend/app/oracle/sources.py` | ì‹¤ì‹œê°„ ê°€ê²© ìˆ˜ì‹  | ì‹¤ì‹œê°„ |
| Price Broadcast | `backend/app/price/websocket.py` | WS /ws/price ë¸Œë¡œë“œìºìŠ¤íŠ¸ | ì‹¤ì‹œê°„ |
| Settlement Loop | `backend/app/options/settlement.py` | ë§Œê¸° ë¼ìš´ë“œ ì •ì‚° | 5ì´ˆ |
| Relayer Flush | `backend/app/options/relayer.py` | ë§¤ì¹­ëœ ì£¼ë¬¸ ë°°ì¹˜ ì œì¶œ | ì´ë²¤íŠ¸ ê¸°ë°˜ |

---

## 3. ê¸°ëŠ¥ë³„ ìƒì„¸ ì„¤ëª…

### 3.1 Swap (í† í° ìŠ¤ì™‘)

**í”„ë¡œí† ì½œ:** Algebra V4 Integral Fork (ì§‘ì¤‘ ìœ ë™ì„± AMM)
**ë¼ìš°íŠ¸:** `/swap`

**ê¸°ëŠ¥:**
- 4ê°œ í† í° ê°„ ìŠ¤ì™‘ (wCTC, lstCTC, sbUSD, USDC)
- Dynamic Fee Pluginì— ì˜í•œ ìë™ ìˆ˜ìˆ˜ë£Œ ì¡°ì •
- QuoterV2ë¥¼ í†µí•œ ì‹¤ì‹œê°„ ê²¬ì 
- ìŠ¬ë¦¬í”¼ì§€ ë³´í˜¸ (ê¸°ë³¸ 0.5%)

**ì»¨íŠ¸ë™íŠ¸ í˜¸ì¶œ ìˆœì„œ:**
```
1. QuoterV2.quoteExactInputSingle() â†’ ì˜ˆìƒ ì¶œë ¥ëŸ‰ ì¡°íšŒ
2. ERC20.approve(Router, amount)     â†’ í† í° ìŠ¹ì¸
3. Router.exactInputSingle()         â†’ ìŠ¤ì™‘ ì‹¤í–‰
```

**í’€ ëª©ë¡:**

| í’€ | ì¹´í…Œê³ ë¦¬ |
|----|----------|
| wCTC / USDC | Major |
| wCTC / sbUSD | Major |
| sbUSD / USDC | Stablecoin |
| lstCTC / wCTC | Correlated |

---

### 3.2 Pool (ìœ ë™ì„± ê³µê¸‰)

**ë¼ìš°íŠ¸:** `/pool`, `/pool/add`

**ê¸°ëŠ¥:**
- ì§‘ì¤‘ ìœ ë™ì„± í¬ì§€ì…˜ ìƒì„± (í‹± ë²”ìœ„ ì§€ì •)
- 4ê°€ì§€ ë²”ìœ„ í”„ë¦¬ì…‹: Full / Safe / Common / Expert
- í¬ì§€ì…˜ì€ NFTë¡œ ë°œí–‰ (NonfungiblePositionManager)
- ìˆ˜ìˆ˜ë£Œ ìˆ˜ì§‘ (collect)

**ì»¨íŠ¸ë™íŠ¸ í˜¸ì¶œ:**
```
1. ERC20.approve(NFTManager, amount0)  â†’ token0 ìŠ¹ì¸
2. ERC20.approve(NFTManager, amount1)  â†’ token1 ìŠ¹ì¸
3. NFTManager.mint({
     token0, token1, tickLower, tickUpper,
     amount0Desired, amount1Desired, ...
   })                                   â†’ í¬ì§€ì…˜ ìƒì„±, NFT ë°œí–‰
```

---

### 3.3 Lend (ëŒ€ì¶œ ì‹œì¥)

**í”„ë¡œí† ì½œ:** Morpho Blue Fork (SnowballLend)
**ë¼ìš°íŠ¸:** `/lend`

**ê¸°ëŠ¥:**
- ê²©ë¦¬ ë§ˆì¼“ ë Œë”© (ê° ë§ˆì¼“ì´ ë…ë¦½ì )
- ê³µê¸‰(Supply) â†’ ì´ì ìˆ˜ìµ
- ë‹´ë³´ ì œê³µ + ì°¨ì…(Borrow) â†’ ë ˆë²„ë¦¬ì§€
- Adaptive Curve IRM (ì´ìš©ë¥  ê¸°ë°˜ ìë™ ê¸ˆë¦¬)

**ë§ˆì¼“:**

| ID | ë§ˆì¼“ | ë‹´ë³´ | ëŒ€ì¶œ | LLTV |
|----|------|------|------|------|
| 0xfb26... | wCTC / sbUSD | wCTC | sbUSD | 77% |
| 0x35cf... | lstCTC / sbUSD | lstCTC | sbUSD | 77% |
| 0x3df8... | sbUSD / USDC | sbUSD | USDC | 90% |

**í•µì‹¬ ìˆ˜í•™:**
```
ì´ìš©ë¥  = totalBorrow / totalSupply
ì°¨ì… APR = AdaptiveCurveIRM.borrowRateView() Ã— ì—°í™˜ì‚°
ê³µê¸‰ APY = ì°¨ì…APR Ã— ì´ìš©ë¥  Ã— (1 - í”„ë¡œí† ì½œ ìˆ˜ìˆ˜ë£Œ)
Health Factor = (ë‹´ë³´ê°€ì¹˜ Ã— LLTV) / ì°¨ì…ê°€ì¹˜
```

---

### 3.4 Borrow (CDP ëŒ€ì¶œ)

**í”„ë¡œí† ì½œ:** Liquity V2 Fork
**ë¼ìš°íŠ¸:** `/borrow`

**ê¸°ëŠ¥:**
- wCTC ë˜ëŠ” lstCTCë¥¼ ë‹´ë³´ë¡œ sbUSD ì°¨ì…
- ì‚¬ìš©ìê°€ ì´ììœ¨ ì§ì ‘ ì„¤ì • (ì—° 0.5% ~ 1000%)
- TroveëŠ” NFTë¡œ ë°œí–‰ (TroveNFT)
- ë‹´ë³´ ë¹„ìœ¨(CR) 110% ì´í•˜ ì‹œ ì²­ì‚°

**ë‘ ê°œ ë¸Œëœì¹˜:**

| ë¸Œëœì¹˜ | ë‹´ë³´ í† í° | ìµœì†Œ CR | ìœ„ê¸° CR |
|--------|-----------|---------|---------|
| wCTC | wCTC | 110% (MCR) | 150% (CCR) |
| lstCTC | lstCTC | 110% (MCR) | 150% (CCR) |

**Trove ë¼ì´í”„ì‚¬ì´í´:**
```
â‘  openTrove(ë‹´ë³´, ë¶€ì±„, ì´ììœ¨)  â†’ Trove ìƒì„± + sbUSD ìˆ˜ë ¹
â‘¡ adjustTrove(ë‹´ë³´ë³€ê²½, ë¶€ì±„ë³€ê²½)  â†’ ë‹´ë³´ ì¶”ê°€/ì œê±°, ìƒí™˜/ì¶”ê°€ ì°¨ì…
â‘¢ adjustTroveInterestRate(ìƒˆì´ììœ¨) â†’ ì´ììœ¨ ì¡°ì •
â‘£ closeTrove()                    â†’ ë¶€ì±„ ì „ì•¡ ìƒí™˜ + ë‹´ë³´ íšŒìˆ˜
```

**ì²­ì‚° ì¡°ê±´:**
- ê°œë³„ CR < 110% â†’ ì²­ì‚° ê°€ëŠ¥
- ì‹œìŠ¤í…œ TCR < 150% â†’ Recovery Mode ì§„ì… (CR < 150% ì¸ Troveë„ ì²­ì‚°)

---

### 3.5 Earn (Stability Pool)

**í”„ë¡œí† ì½œ:** Liquity V2 Fork
**ë¼ìš°íŠ¸:** `/earn`

**ê¸°ëŠ¥:**
- sbUSDë¥¼ Stability Poolì— ì˜ˆì¹˜
- ì²­ì‚°ëœ Troveì˜ ë‹´ë³´(wCTC/lstCTC)ë¥¼ í• ì¸ ê°€ê²©ì— íšë“
- ê° ë¸Œëœì¹˜(wCTC/lstCTC)ë³„ ë³„ë„ í’€

**ë™ì‘ ì›ë¦¬:**
```
1. ìœ ì €ê°€ sbUSD ì˜ˆì¹˜ â†’ provideToSP(amount, false)
2. ì²­ì‚° ë°œìƒ ì‹œ â†’ ì˜ˆì¹˜ëœ sbUSDë¡œ ë¶€ì±„ í¡ìˆ˜
3. ëŒ€ê°€ë¡œ ë‹´ë³´ í† í° ì§€ê¸‰ (ìˆœì´ìµ ~10%)
4. ìœ ì €ê°€ ë‹´ë³´ ìˆ˜ìµ í´ë ˆì„ â†’ claimAllCollGains()
5. ì¶œê¸ˆ â†’ withdrawFromSP(amount, true)
```

---

### 3.6 Options (BTC ë°”ì´ë„ˆë¦¬ ì˜µì…˜)

**í”„ë¡œí† ì½œ:** Snowball Options (ìì²´ ê°œë°œ)
**ë¼ìš°íŠ¸:** `/options`, `/options/history`

**ê¸°ëŠ¥:**
- BTC ê°€ê²©ì´ ì˜¤ë¥¼ì§€(Over) ë‚´ë¦´ì§€(Under) ì˜ˆì¸¡
- EIP-712 ì„œëª…ìœ¼ë¡œ ê°€ìŠ¤ ì—†ì´ ì£¼ë¬¸
- FIFO ë§¤ì¹­ ì—”ì§„ (Over â†” Under í˜ì–´ë§)
- ë¯¸ë§¤ì¹­ ì£¼ë¬¸ì€ Vaultê°€ ìƒëŒ€ë°© (LP í’€)
- ë¼ìš´ë“œ ê¸°ë°˜ (ì‹œì‘ê°€ â†’ ì¢…ë£Œê°€ ë¹„êµ)

**ì»¨íŠ¸ë™íŠ¸ êµ¬ì¡°:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ClearingHouse    â”‚     â”‚ OptionsVault    â”‚
â”‚ (CDP ì”ê³  ê´€ë¦¬)   â”‚     â”‚ (LP í’€)         â”‚
â”‚                  â”‚     â”‚                 â”‚
â”‚ deposit()        â”‚     â”‚ deposit()       â”‚
â”‚ withdraw()       â”‚     â”‚ lockCollateral()â”‚
â”‚ lockInEscrow()   â”‚     â”‚ payWinner()     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚
         â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SnowballOptions (ì—”ì§„)                   â”‚
â”‚                                          â”‚
â”‚ submitFilledOrders() â† Relayerë§Œ í˜¸ì¶œ    â”‚
â”‚ executeRound()       â† Operatorë§Œ í˜¸ì¶œ   â”‚
â”‚ settleOrders()       â† Operatorë§Œ í˜¸ì¶œ   â”‚
â”‚                                          â”‚
â”‚ Commission: 5% (ìŠ¹ë¦¬ì payoutì—ì„œ ì°¨ê°)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OptionsRelayer   â”‚     â”‚ BTCMockOracle   â”‚
â”‚ (EIP-712 ê²€ì¦)   â”‚     â”‚ (ê°€ê²© í”¼ë“œ)      â”‚
â”‚                  â”‚     â”‚                 â”‚
â”‚ ì„œëª… â†’ ì˜¨ì²´ì¸     â”‚     â”‚ Binance WS â†’    â”‚
â”‚ nonce ê´€ë¦¬       â”‚     â”‚ 10ì´ˆ í‘¸ì‹œ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìˆ˜ìˆ˜ë£Œ êµ¬ì¡°:**
- ì»¤ë¯¸ì…˜: 5% (ìŠ¹ë¦¬ ë°°ë‹¹ì—ì„œ ì°¨ê°)
- ê°€ìŠ¤ë¹„: í”„ë¡œí† ì½œ ë¶€ë‹´ (Relayerê°€ ì œì¶œ)

---

### 3.7 Dashboard

**ë¼ìš°íŠ¸:** `/dashboard`

**ê¸°ëŠ¥:**
- ëª¨ë“  í† í° ì”ê³  (tCTC, wCTC, sbUSD, lstCTC)
- í™œì„± Trove ìˆ˜ (ë¸Œëœì¹˜ë³„)
- Stability Pool ì˜ˆì¹˜ ì”ê³ 
- Quick Action ë§í¬

---

### 3.8 Agent (ERC-8004)

**ë¼ìš°íŠ¸:** `/agent`
**ìƒíƒœ:** ìŠ¤í… UI (ê¸°ëŠ¥ ë¯¸ì™„ì„±)

**ì„¤ê³„ ì˜ë„:**
- AI ì—ì´ì „íŠ¸ê°€ ì‚¬ìš©ì í¬ì§€ì…˜ì„ ìë™ ê´€ë¦¬
- ì„œë²„ ì§€ê°‘ ìƒì„± â†’ ì—ì´ì „íŠ¸ì— ê¶Œí•œ ìœ„ì„
- ìë™ ë‹´ë³´ ë¦¬ë°¸ëŸ°ì‹±, ì´ììœ¨ ìµœì í™”, ì²­ì‚° ë°©ì–´

---

### 3.9 Chat

**ë¼ìš°íŠ¸:** `/chat`

**ê¸°ëŠ¥:**
- AI ì–´ì‹œìŠ¤í„´íŠ¸ì™€ ëŒ€í™”
- DeFi ìš©ì–´, í¬ì§€ì…˜ ê´€ë¦¬ ì¡°ì–¸
- ë°±ì—”ë“œ Chat API ì—°ë™

---

## 4. ìœ ì € í”Œë¡œìš°

### 4.1 ì‹ ê·œ ìœ ì € ì˜¨ë³´ë”©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì›¹ì‚¬ì´íŠ¸  â”‚â”€â”€â”€â”€â–¶â”‚ Privy ë¡œê·¸ì¸  â”‚â”€â”€â”€â”€â–¶â”‚ ì§€ê°‘ ìë™ ìƒì„±   â”‚
â”‚ ì ‘ì†     â”‚     â”‚ (ì´ë©”ì¼/êµ¬ê¸€/ â”‚     â”‚ (ì„ë² ë””ë“œ ì§€ê°‘)  â”‚
â”‚          â”‚     â”‚  ì§€ê°‘ ì—°ê²°)   â”‚     â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ Dashboard ì§„ì…    â”‚
                                    â”‚ - ì”ê³  í™•ì¸       â”‚
                                    â”‚ - Quick Actions  â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Privy ì¸ì¦ ë°©ì‹:**
1. **ì´ë©”ì¼ ë¡œê·¸ì¸** â†’ ì´ë©”ì¼ OTP â†’ ì„ë² ë””ë“œ ì§€ê°‘ ìë™ ìƒì„±
2. **êµ¬ê¸€ ë¡œê·¸ì¸** â†’ OAuth â†’ ì„ë² ë””ë“œ ì§€ê°‘ ìë™ ìƒì„±
3. **ì§€ê°‘ ì—°ê²°** â†’ MetaMask/WalletConnect â†’ ì™¸ë¶€ ì§€ê°‘ ì§ì ‘ ì‚¬ìš©

---

### 4.2 Swap ìœ ì € í”Œë¡œìš°

```
ìœ ì €                           í”„ë¡ íŠ¸ì—”ë“œ                    ì˜¨ì²´ì¸
 â”‚                               â”‚                           â”‚
 â”‚  1. í† í° ì„ íƒ (From/To)        â”‚                           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                           â”‚
 â”‚                               â”‚  QuoterV2.quote()         â”‚
 â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                               â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚  2. ì˜ˆìƒ ìˆ˜ë ¹ì•¡ í™•ì¸            â”‚                           â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
 â”‚                               â”‚                           â”‚
 â”‚  3. ê¸ˆì•¡ ì…ë ¥                  â”‚                           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                           â”‚
 â”‚                               â”‚                           â”‚
 â”‚  4. [Approve] í´ë¦­             â”‚                           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ERC20.approve()          â”‚
 â”‚  (ì§€ê°‘ ì„œëª…)                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                               â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                               â”‚                           â”‚
 â”‚  5. [Swap] í´ë¦­                â”‚                           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Router.exactInputSingle()â”‚
 â”‚  (ì§€ê°‘ ì„œëª…)                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                               â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚  6. ì™„ë£Œ í™•ì¸                  â”‚                           â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
```

---

### 4.3 Borrow ìœ ì € í”Œë¡œìš° (Trove ì—´ê¸°)

```
ìœ ì €                           í”„ë¡ íŠ¸ì—”ë“œ                      ì˜¨ì²´ì¸
 â”‚                               â”‚                             â”‚
 â”‚  1. ë¸Œëœì¹˜ ì„ íƒ (wCTC/lstCTC)   â”‚                             â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                             â”‚
 â”‚                               â”‚  PriceFeed.getPrice()       â”‚
 â”‚                               â”‚  TroveManager.getSystem*()  â”‚
 â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚  2. í˜„ì¬ ê°€ê²©/TCR í™•ì¸          â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
 â”‚                               â”‚                             â”‚
 â”‚  3. ë‹´ë³´ ê¸ˆì•¡ ì…ë ¥              â”‚                             â”‚
 â”‚  4. ì°¨ì… ê¸ˆì•¡ ì…ë ¥              â”‚                             â”‚
 â”‚  5. ì´ììœ¨ ì„¤ì •                â”‚                             â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                             â”‚
 â”‚                               â”‚  CR ê³„ì‚° (ë‹´ë³´Ã—ê°€ê²©Ã·ë¶€ì±„)     â”‚
 â”‚  6. CR ë¯¸ë¦¬ë³´ê¸°                â”‚                             â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
 â”‚                               â”‚                             â”‚
 â”‚  7. [Open Trove] í´ë¦­          â”‚                             â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ERC20.approve(BorrowerOps) â”‚
 â”‚  (ì§€ê°‘ ì„œëª… Ã—2)                â”‚  BorrowerOps.openTrove()    â”‚
 â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                               â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚  8. Trove NFT ìˆ˜ë ¹ í™•ì¸        â”‚                             â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
```

**CR(ë‹´ë³´ ë¹„ìœ¨) ê³„ì‚°:**
```
CR = (ë‹´ë³´ ìˆ˜ëŸ‰ Ã— ë‹´ë³´ ê°€ê²©) / ì´ ë¶€ì±„(ì›ê¸ˆ + ìˆ˜ìˆ˜ë£Œ) Ã— 100%

ì˜ˆì‹œ:
  ë‹´ë³´: 100 wCTC (ê°€ê²© $2)
  ì°¨ì…: 100 sbUSD
  CR = (100 Ã— 2) / 100 = 200%

ì•ˆì „ ê¸°ì¤€:
  ğŸŸ¢ > 200%  ì•ˆì „
  ğŸŸ¡ 150~200% ì£¼ì˜
  ğŸ”´ < 150%  ìœ„í—˜ (Recovery Mode ì‹œ ì²­ì‚° ê°€ëŠ¥)
  â›” < 110%  ì²­ì‚°
```

---

### 4.4 Earn ìœ ì € í”Œë¡œìš°

```
ìœ ì €                           í”„ë¡ íŠ¸ì—”ë“œ                    ì˜¨ì²´ì¸
 â”‚                               â”‚                           â”‚
 â”‚  1. ë¸Œëœì¹˜ ì„ íƒ (wCTC/lstCTC)   â”‚                           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                           â”‚
 â”‚                               â”‚  StabilityPool ì¡°íšŒ        â”‚
 â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚  2. í’€ í˜„í™© í™•ì¸               â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
 â”‚                               â”‚                           â”‚
 â”‚  3. sbUSD ê¸ˆì•¡ ì…ë ¥            â”‚                           â”‚
 â”‚  4. [Deposit] í´ë¦­             â”‚                           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ERC20.approve()          â”‚
 â”‚  (ì§€ê°‘ ì„œëª…)                   â”‚  StabilityPool.provideToSPâ”‚
 â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚  5. ì˜ˆì¹˜ ì™„ë£Œ                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
 â”‚                               â”‚                           â”‚
 â”‚  ... (ì‹œê°„ ê²½ê³¼, ì²­ì‚° ë°œìƒ) ...  â”‚                           â”‚
 â”‚                               â”‚                           â”‚
 â”‚  6. ë‹´ë³´ Gain í™•ì¸             â”‚  getDepositorCollGain()   â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                               â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚  7. [Claim] í´ë¦­               â”‚                           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  claimAllCollGains()      â”‚
 â”‚  (ì§€ê°‘ ì„œëª…)                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚  8. ë‹´ë³´ í† í° ìˆ˜ë ¹              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
```

---

### 4.5 Lend ìœ ì € í”Œë¡œìš° (ê³µê¸‰)

```
ìœ ì €                           í”„ë¡ íŠ¸ì—”ë“œ                    ì˜¨ì²´ì¸
 â”‚                               â”‚                           â”‚
 â”‚  1. ë§ˆì¼“ ì„ íƒ                  â”‚                           â”‚
 â”‚     (ì˜ˆ: wCTC/sbUSD)           â”‚                           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                           â”‚
 â”‚                               â”‚  SnowballLend.market()    â”‚
 â”‚  2. APY/ì´ìš©ë¥  í™•ì¸             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                               â”‚                           â”‚
 â”‚  3. ê³µê¸‰ ê¸ˆì•¡ ì…ë ¥ (sbUSD)      â”‚                           â”‚
 â”‚  4. [Supply] í´ë¦­              â”‚                           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ERC20.approve()          â”‚
 â”‚  (ì§€ê°‘ ì„œëª…)                   â”‚  SnowballLend.supply()    â”‚
 â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚  5. Supply Share ìˆ˜ë ¹           â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
 â”‚                               â”‚                           â”‚
 â”‚  ... (ì‹œê°„ ê²½ê³¼, ì´ì ë°œìƒ) ... â”‚                           â”‚
 â”‚                               â”‚                           â”‚
 â”‚  6. [Withdraw] í´ë¦­             â”‚                           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  SnowballLend.withdraw()  â”‚
 â”‚  (ì§€ê°‘ ì„œëª…)                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚  7. ì›ê¸ˆ + ì´ì ìˆ˜ë ¹            â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
```

---

### 4.6 Options ìœ ì € í”Œë¡œìš° (ë°”ì´ë„ˆë¦¬ ì˜µì…˜)

```
ìœ ì €                    í”„ë¡ íŠ¸ì—”ë“œ              ë°±ì—”ë“œ                ì˜¨ì²´ì¸
 â”‚                        â”‚                     â”‚                     â”‚
 â”‚  1. BTC ê°€ê²© ì‹¤ì‹œê°„ í™•ì¸ â”‚â—€â”€â”€â”€â”€ WS /ws/price â”€â”€â”‚â—€â”€â”€ Binance WS â”€â”€â”€â”€ â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                     â”‚
 â”‚                        â”‚                     â”‚                     â”‚
 â”‚  2. ClearingHouseì—     â”‚                     â”‚                     â”‚
 â”‚     tCTC ì˜ˆì¹˜           â”‚                     â”‚                     â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ClearingHouse      â”‚                     â”‚
 â”‚  (ì§€ê°‘ ì„œëª…)            â”‚  .deposit{value}    â”‚                     â”‚
 â”‚                        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                        â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                        â”‚                     â”‚                     â”‚
 â”‚  3. Over/Under ì„ íƒ     â”‚                     â”‚                     â”‚
 â”‚  4. ê¸ˆì•¡ ì…ë ¥           â”‚                     â”‚                     â”‚
 â”‚  5. EIP-712 ì„œëª…        â”‚                     â”‚                     â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                     â”‚                     â”‚
 â”‚  (ì§€ê°‘ ì„œëª…, ê°€ìŠ¤ X)     â”‚  POST /api/options/ â”‚                     â”‚
 â”‚                        â”‚  order              â”‚                     â”‚
 â”‚                        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                     â”‚
 â”‚                        â”‚                     â”‚  FIFO ë§¤ì¹­            â”‚
 â”‚                        â”‚                     â”‚  (Over â†” Under)      â”‚
 â”‚                        â”‚                     â”‚                     â”‚
 â”‚                        â”‚                     â”‚  ë§¤ì¹­ ì™„ë£Œ ì‹œ:         â”‚
 â”‚                        â”‚                     â”‚  Relayer.submit      â”‚
 â”‚                        â”‚                     â”‚  SignedOrders()      â”‚
 â”‚                        â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                        â”‚                     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚  6. ì£¼ë¬¸ ì ‘ìˆ˜ í™•ì¸       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚                     â”‚
 â”‚                        â”‚                     â”‚                     â”‚
 â”‚  ... (ë¼ìš´ë“œ ì¢…ë£Œ) ...   â”‚                     â”‚                     â”‚
 â”‚                        â”‚                     â”‚  executeRound()     â”‚
 â”‚                        â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                        â”‚                     â”‚  settleOrders()     â”‚
 â”‚                        â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                        â”‚                     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                        â”‚                     â”‚                     â”‚
 â”‚  7. ê²°ê³¼ í™•ì¸           â”‚  GET /api/options/  â”‚                     â”‚
 â”‚     (ìŠ¹ë¦¬: ì”ê³  ì¦ê°€)    â”‚  history            â”‚                     â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                     â”‚
```

**ë§¤ì¹­ ë¡œì§:**
```
Over ì£¼ë¬¸ í:  [A: 10 tCTC] [B: 5 tCTC] [C: 20 tCTC]
Under ì£¼ë¬¸ í: [X: 8 tCTC] [Y: 12 tCTC]

ë§¤ì¹­ ê²°ê³¼:
  A(10) â†” X(8): 8 tCTC ë§¤ì¹­, A ì”ì—¬ 2
  A(2) + B(5) â†” Y(12): 7 ë§¤ì¹­, Y ì”ì—¬ 5
  Y(5) â†’ Vaultê°€ ìƒëŒ€ë°© (LP í’€)
  C(20) â†’ Vaultê°€ ìƒëŒ€ë°© (LP í’€)

50ê°œ ë°°ì¹˜ ë‹¨ìœ„ë¡œ OptionsRelayerì— ì œì¶œ
```

**ì •ì‚° ë¡œì§:**
```
if endPrice > startPrice:
  â†’ Over ìŠ¹ë¦¬: ë°°ë‹¹ = ìƒëŒ€ë°© ê¸ˆì•¡ Ã— 0.95 (5% ì»¤ë¯¸ì…˜)
  â†’ Under íŒ¨ë°°: ì›ê¸ˆ ëª°ìˆ˜

if endPrice < startPrice:
  â†’ Under ìŠ¹ë¦¬
  â†’ Over íŒ¨ë°°

if endPrice == startPrice:
  â†’ Draw: ì–‘ì¸¡ ì›ê¸ˆ ë°˜í™˜
```

---

### 4.7 Pool ìœ ë™ì„± ê³µê¸‰ ìœ ì € í”Œë¡œìš°

```
ìœ ì €                           í”„ë¡ íŠ¸ì—”ë“œ                    ì˜¨ì²´ì¸
 â”‚                               â”‚                           â”‚
 â”‚  1. í† í° í˜ì–´ ì„ íƒ              â”‚                           â”‚
 â”‚  2. ê°€ê²© ë²”ìœ„ ì„ íƒ              â”‚                           â”‚
 â”‚     (Full/Safe/Common/Expert) â”‚                           â”‚
 â”‚  3. ì–‘ìª½ í† í° ê¸ˆì•¡ ì…ë ¥         â”‚                           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                           â”‚
 â”‚                               â”‚                           â”‚
 â”‚  4. [Add Liquidity] í´ë¦­       â”‚                           â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  ERC20.approve(token0)    â”‚
 â”‚  (ì§€ê°‘ ì„œëª… Ã—3)                â”‚  ERC20.approve(token1)    â”‚
 â”‚                               â”‚  NFTManager.mint()        â”‚
 â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚  5. LP NFT ìˆ˜ë ¹                â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
 â”‚                               â”‚                           â”‚
 â”‚  ... (ê±°ë˜ ìˆ˜ìˆ˜ë£Œ ë°œìƒ) ...     â”‚                           â”‚
 â”‚                               â”‚                           â”‚
 â”‚  6. ìˆ˜ìˆ˜ë£Œ ìˆ˜ì§‘                 â”‚  NFTManager.collect()     â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚  7. í† í° ìˆ˜ë ¹                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
```

---

## 5. ìš´ì˜ í”Œë¡œìš° (Operator)

### 5.1 ì´ˆê¸° ë°°í¬ í”Œë¡œìš°

```
Step 1: ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ë¹Œë“œ & í…ŒìŠ¤íŠ¸
  $ make build-contracts    # forge build
  $ make test               # forge test (48/48 í†µê³¼)

Step 2: Oracle ë°°í¬
  $ make deploy-oracle
  â†’ BTCMockOracle ë°°í¬
  â†’ OPERATOR_ROLEì„ ë°±ì—”ë“œ ì§€ê°‘ì— ë¶€ì—¬

Step 3: Options ë°°í¬
  $ make deploy-options
  â†’ ClearingHouse (Proxy) ë°°í¬
  â†’ OptionsVault (Proxy) ë°°í¬
  â†’ SnowballOptions (Proxy) ë°°í¬
  â†’ OptionsRelayer (Proxy) ë°°í¬
  â†’ ì—­í•  ì„¤ì •:
    - ClearingHouse.PRODUCT_ROLE â†’ SnowballOptions
    - OptionsVault.ENGINE_ROLE â†’ SnowballOptions
    - SnowballOptions.RELAYER_ROLE â†’ OptionsRelayer
    - OptionsRelayer.OPERATOR_ROLE â†’ ë°±ì—”ë“œ ì§€ê°‘

Step 4: í™˜ê²½ë³€ìˆ˜ ì„¤ì •
  backend/.env:
    ORACLE_ADDRESS=0xcfad...
    CLEARING_HOUSE_ADDRESS=0xd999...
    VAULT_ADDRESS=0x7745...
    OPTIONS_ADDRESS=0x595e...
    RELAYER_ADDRESS=0xe58f...
    OPERATOR_PRIVATE_KEY=0x...

  packages/frontend/.env.local:
    NEXT_PUBLIC_PRIVY_APP_ID=...
    NEXT_PUBLIC_API_BASE=http://localhost:8000

Step 5: ì‹œì‘
  $ make docker-up          # backend + frontend ì»¨í…Œì´ë„ˆ ì‹œì‘
```

### 5.2 ì¼ìƒ ìš´ì˜ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ì •ìƒ ìš´ì˜ ìƒíƒœ                    â”‚
â”‚                                                  â”‚
â”‚  Backend (í•­ì‹œ êµ¬ë™):                              â”‚
â”‚  â”œâ”€ Oracle: Binance WS â†’ 10ì´ˆë§ˆë‹¤ ê°€ê²© í‘¸ì‹œ âœ…      â”‚
â”‚  â”œâ”€ Price WS: /ws/price ë¸Œë¡œë“œìºìŠ¤íŠ¸ âœ…              â”‚
â”‚  â”œâ”€ Matching: ì£¼ë¬¸ ìˆ˜ì‹  â†’ FIFO ë§¤ì¹­ â†’ ë°°ì¹˜ ì œì¶œ âœ…   â”‚
â”‚  â””â”€ Settlement: ë§Œê¸° ë¼ìš´ë“œ ê°ì§€ â†’ ì •ì‚° ì‹¤í–‰ âœ…       â”‚
â”‚                                                  â”‚
â”‚  ëª¨ë‹ˆí„° í¬ì¸íŠ¸:                                     â”‚
â”‚  â”œâ”€ GET /health â†’ 200 OK                          â”‚
â”‚  â”œâ”€ Oracle TX ë¡œê·¸ (10ì´ˆ ê°„ê²©)                      â”‚
â”‚  â”œâ”€ Binance WS ì—°ê²° ìƒíƒœ                            â”‚
â”‚  â””â”€ Gas ì”ê³  (OPERATOR_ADDRESS)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ì¥ì•  ì‹œë‚˜ë¦¬ì˜¤ & ëŒ€ì‘

| ì¥ì•  | ì¦ìƒ | ìë™ ëŒ€ì‘ | ìˆ˜ë™ ëŒ€ì‘ |
|------|------|----------|----------|
| Binance WS ëŠê¹€ | ê°€ê²© ì—…ë°ì´íŠ¸ ë©ˆì¶¤ | CoinGecko fallback ìë™ ì „í™˜ | WS ì¬ì—°ê²° í™•ì¸ |
| ì˜¤ë¼í´ TX ì‹¤íŒ¨ | ê°€ê²© stale (>120ì´ˆ) | ì¬ì‹œë„ ë¡œì§ | ê°€ìŠ¤ ì”ê³  í™•ì¸, RPC ìƒíƒœ í™•ì¸ |
| ì •ì‚° TX ì‹¤íŒ¨ | ë¼ìš´ë“œ ë¯¸ì •ì‚° | ì¬ì‹œë„ (ë‹¤ìŒ í´ë§) | ìˆ˜ë™ ì •ì‚° í˜¸ì¶œ |
| RPC ë…¸ë“œ ë‹¤ìš´ | ëª¨ë“  TX ì‹¤íŒ¨ | â€” | ë‹¤ë¥¸ RPC ì—”ë“œí¬ì¸íŠ¸ ì„¤ì • |
| Operator ê°€ìŠ¤ ë¶€ì¡± | TX ì œì¶œ ë¶ˆê°€ | â€” | tCTC ì¶©ì „ |

---

## 6. ë°°í¬ëœ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œ

> ë„¤íŠ¸ì›Œí¬: **Creditcoin Testnet (Chain ID: 102031)**
> Explorer: https://creditcoin-testnet.blockscout.com

### í† í°

| í† í° | ì£¼ì†Œ |
|------|------|
| wCTC | `0x8f7f60a0f615d828eafcbbf6121f73efcfb56969` |
| lstCTC | `0x72968ff9203dc5f352c5e42477b84d11c8c8f153` |
| sbUSD | `0x5772f9415b75ecca00e7667e0c7d730db3b29fbd` |
| USDC (Mock) | `0xbcaa46ef7a399fcdb64adf4520cdcc6d62fcaaed` |

### DEX (Algebra V4)

| ì»¨íŠ¸ë™íŠ¸ | ì£¼ì†Œ |
|----------|------|
| SnowballFactory | `0x04dca03a979b2ad38ee964e8d32c9d36c1301040` |
| SnowballPoolDeployer | `0x71f39dc01dce21358e0733a9981f4b5010312dbb` |
| SnowballRouter | `0x151211ea233c72d466e7c159bf07673771164e4e` |
| DynamicFeePlugin | `0x962267ce45eeef519212243fe8d954b951e31f2c` |
| NonfungiblePositionManager | `0x16534c66e4249ac8cd39a8c91cc80d3f0389a71f` |
| QuoterV2 | `0x36bab7a5dcfb2c4e307c088bc4ddff74f5e0dc2...` |

### Liquity V2 (Borrow / Earn)

| ì»¨íŠ¸ë™íŠ¸ | wCTC ë¸Œëœì¹˜ | lstCTC ë¸Œëœì¹˜ |
|----------|-------------|---------------|
| BorrowerOperations | `0xe828...` | `0x34f3...` |
| TroveManager | `0x30ef...` | `0xda7b...` |
| StabilityPool | `0x91c9...` | `0x2bcd...` |
| TroveNFT | `0x51b7...` | `0xc2e0...` |
| PriceFeed | `0x17a3...` | `0x5f97...` |

### Morpho Blue (Lend)

| ì»¨íŠ¸ë™íŠ¸ | ì£¼ì†Œ |
|----------|------|
| SnowballLend | `0x7d604b31297b36aace73255931f65e891cf289d3` |
| AdaptiveCurveIRM | `0x0ac487d84507b2fbe9130acc080f2b554cb3fffe` |
| VaultFactory | `0x6e97df392462b8c2b8d13e2cd77a90168925edf6` |

### Options Protocol

| ì»¨íŠ¸ë™íŠ¸ | ì£¼ì†Œ | íƒ€ì… |
|----------|------|------|
| BTCMockOracle | `0xcfad30e844685abb5ae1e8c21f727afd23f46abc` | ì¼ë°˜ |
| OptionsClearingHouse | `0xd999f043760b4a372c57645e0c2daab3ce81b741` | UUPS Proxy |
| OptionsVault | `0x7745cc64ff8ec8923876c9fe062d347f2fa78079` | UUPS Proxy |
| SnowballOptions | `0x595ed79d89623158d486a1a0daada35669ccc352` | UUPS Proxy |
| OptionsRelayer | `0xe58f9cdb8ec63b88759bde403de0e062382f13b1` | UUPS Proxy |

### ERC-8004 (Agent)

| ì»¨íŠ¸ë™íŠ¸ | ì£¼ì†Œ |
|----------|------|
| IdentityRegistry | `0x993C9150f074435BA79033300834FcE06897de9B` |
| ReputationRegistry | `0x3E5E194e39b777F568c9a261f46a5DCC43840726` |
| ValidationRegistry | `0x84b9B2121187155C1c85bA6EA34e35c981BbA023` |

---

## 7. API ì—”ë“œí¬ì¸íŠ¸

### Backend (Port 8000)

#### ì‹œìŠ¤í…œ

| Method | Path | ì„¤ëª… |
|--------|------|------|
| GET | `/health` | í—¬ìŠ¤ì²´í¬ |
| GET | `/` | ì„œë¹„ìŠ¤ ì •ë³´ |

#### ê°€ê²© API

| Method | Path | ì„¤ëª… |
|--------|------|------|
| GET | `/api/price/btc/current` | í˜„ì¬ BTC ê°€ê²© |
| GET | `/api/price/btc/history?interval=1m&limit=100` | ê°€ê²© íˆìŠ¤í† ë¦¬ |
| GET | `/api/price/btc/ohlcv?interval=1m&limit=100` | OHLCV ìº”ë“¤ ë°ì´í„° |
| WS | `/ws/price` | ì‹¤ì‹œê°„ ê°€ê²© ìŠ¤íŠ¸ë¦¼ |

#### ì˜µì…˜ API

| Method | Path | ì„¤ëª… |
|--------|------|------|
| POST | `/api/options/order` | ì„œëª…ëœ ì£¼ë¬¸ ì œì¶œ |
| GET | `/api/options/rounds` | í˜„ì¬/ê³¼ê±° ë¼ìš´ë“œ ëª©ë¡ |
| GET | `/api/options/history?address=0x...` | ìœ ì € ê±°ë˜ ì´ë ¥ |
| GET | `/api/options/balance?address=0x...` | ìœ ì € ì”ê³  ì¡°íšŒ |

#### POST `/api/options/order` ìš”ì²­ í˜•ì‹

```json
{
  "user": "0x...",
  "isOver": true,
  "amount": "1000000000000000000",
  "signature": "0x...",
  "nonce": 0
}
```

---

## 8. Docker ìš´ì˜

### êµ¬ì„±

```yaml
# docker-compose.yml
services:
  backend:    # Port 8000, Python FastAPI
  frontend:   # Port 3000, Next.js (depends_on: backend)
```

### ëª…ë ¹ì–´

```bash
# ë¹Œë“œ & ì‹œì‘
make docker-build          # ABI ì¶”ì¶œ + Docker ë¹Œë“œ
make docker-up             # ì»¨í…Œì´ë„ˆ ì‹œì‘ (detach)

# ì¤‘ì§€
make docker-down           # ì»¨í…Œì´ë„ˆ ì¤‘ì§€

# ë¡œê·¸
make docker-logs           # ì „ì²´ ë¡œê·¸
make docker-logs-backend   # ë°±ì—”ë“œë§Œ
make docker-logs-frontend  # í”„ë¡ íŠ¸ì—”ë“œë§Œ

# ê°œë°œ ëª¨ë“œ (Docker ì—†ì´)
make backend-dev           # uvicorn --reload
make frontend-dev          # next dev --turbopack
```

### í™˜ê²½ë³€ìˆ˜ (docker-compose)

| ë³€ìˆ˜ | ê¸°ë³¸ê°’ | ì„¤ëª… |
|------|--------|------|
| `BACKEND_PORT` | 8000 | ë°±ì—”ë“œ ì™¸ë¶€ í¬íŠ¸ |
| `FRONTEND_PORT` | 3000 | í”„ë¡ íŠ¸ì—”ë“œ ì™¸ë¶€ í¬íŠ¸ |
| `NEXT_PUBLIC_PRIVY_APP_ID` | â€” | Privy ì•± ID |
| `NEXT_PUBLIC_API_BASE` | `http://backend:8000` | API ì£¼ì†Œ (Docker ë‚´ë¶€) |

---

## 9. ëª¨ë‹ˆí„°ë§ & ì¥ì•  ëŒ€ì‘

### 9.1 í—¬ìŠ¤ì²´í¬ í¬ì¸íŠ¸

```bash
# ë°±ì—”ë“œ í—¬ìŠ¤
curl http://localhost:8000/health

# í”„ë¡ íŠ¸ì—”ë“œ í—¬ìŠ¤
curl http://localhost:3000/

# ì˜¤ë¼í´ ê°€ê²© í™•ì¸
curl http://localhost:8000/api/price/btc/current

# Docker ìƒíƒœ
docker compose ps
```

### 9.2 Operator ì§€ê°‘ ê´€ë¦¬

ë°±ì—”ë“œê°€ ì˜¨ì²´ì¸ TXë¥¼ ë³´ë‚´ë ¤ë©´ Operator ì§€ê°‘ì— tCTC(ê°€ìŠ¤ë¹„)ê°€ ì¶©ë¶„í•´ì•¼ í•©ë‹ˆë‹¤.

```
í•„ìš” ê°€ìŠ¤ ì˜ˆì¸¡:
- Oracle ê°€ê²© í‘¸ì‹œ: ~0.001 tCTC Ã— 6/ë¶„ Ã— 60ë¶„ Ã— 24ì‹œê°„ â‰ˆ 8.64 tCTC/ì¼
- ì˜µì…˜ ì •ì‚°: ~0.003 tCTC Ã— ë¼ìš´ë“œë‹¹ Ã— í•˜ë£¨ ë¼ìš´ë“œ ìˆ˜
- Relayer ì œì¶œ: ~0.005 tCTC Ã— ë°°ì¹˜ë‹¹

ê¶Œì¥ ìµœì†Œ ì”ê³ : 100 tCTC
```

### 9.3 ë¡œê·¸ í‚¤ì›Œë“œ

| ë¡œê·¸ | ì˜ë¯¸ | ì¡°ì¹˜ |
|------|------|------|
| `Oracle price pushed: $XX,XXX` | ì •ìƒ ê°€ê²© í‘¸ì‹œ | â€” |
| `Connected to Binance WS` | WS ì—°ê²° ì„±ê³µ | â€” |
| `TX success: 0x...` | íŠ¸ëœì­ì…˜ ì„±ê³µ | â€” |
| `CoinGecko BTC price` | Fallback ì†ŒìŠ¤ ì‚¬ìš© | Binance WS ì—°ê²° í™•ì¸ |
| `TX failed` | íŠ¸ëœì­ì…˜ ì‹¤íŒ¨ | ê°€ìŠ¤/RPC í™•ì¸ |
| `Nonce too low` | ë…¼ìŠ¤ ì¶©ëŒ | ë°±ì—”ë“œ ì¬ì‹œì‘ |

---

## ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë²„ì „ | ë³€ê²½ ë‚´ìš© |
|------|------|----------|
| 2026-02-25 | v0.2.0 | ìµœì´ˆ ì‘ì„± â€” ì „ì²´ ìš´ì˜ í”Œë¡œìš°, ê¸°ëŠ¥ ìƒì„¸, ìœ ì € í”Œë¡œìš° |
